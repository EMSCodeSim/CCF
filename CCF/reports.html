<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CCF Reports</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="reportsPage">

<header class="topbar">
  <div class="brand">
    <div class="title">Reports</div>
    <div class="modePill">BLS</div>
  </div>

  <div class="topActions">
    <a class="endBtn ghost" href="./index.html">â¬…ï¸Ž Timer</a>
  </div>
</header>

<main class="app">
  <section class="stateBar stateReady" aria-label="Reports header">
    <div class="stateLeft">
      <div class="stateLabel">SESSION REPORT</div>
      <div class="stateSub" id="reportSubtitle">Most recent session</div>
    </div>
    <div class="stateRight">
      <div class="stateMini" id="reportCount">0 saved</div>
    </div>
  </section>

  <!-- Upgrade / Pro status (hidden automatically when Pro is unlocked) -->
  <section class="upgradeCard" id="upgradeCard" aria-label="Upgrade">
    <div class="upgradeTop">
      <div>
        <div class="upgradeTitle">Unlock Pro Reports</div>
        <div class="upgradeSub">Assign reports to students, manage a class roster, and download detailed report cards.</div>
      </div>
      <div class="proPill">PRO</div>
    </div>
    <div class="upgradeBtns">
      <a class="primaryBtn" id="btnUpgrade" href="#">Unlock in the app</a>
      <button class="secondaryBtn" id="btnDebugPro" type="button">Debug: Toggle Pro</button>
    </div>
    <div class="upgradeNote">Web/free mode: shows simple CCF score and basic pause info.</div>
  </section>

  <section class="reportCard" id="latestCard" aria-label="Latest report"></section>

  <!-- Pro: class + student reporting tools -->
  <section class="proBlock" id="proBlock" aria-label="Pro tools">
    <div class="historyTop">
      <div>
        <div class="historyTitle">Class & Students</div>
        <div class="historySub" id="classMeta">No class loaded</div>
      </div>
    </div>

    <!-- Class setup (moved here so paid materials stay together) -->
    <section class="dashCard" aria-label="Class setup" style="margin-top:12px;">
      <div class="dashTitle">Class Setup</div>
      <div class="dashSub">Create a roster so reports can show individual and class scores.</div>

      <label class="field">
        <span class="fieldLabel">Class name</span>
        <input id="className" type="text" placeholder="RC Health EMT - Skills Day" />
      </label>

      <label class="field">
        <span class="fieldLabel">Instructor</span>
        <input id="classInstructor" type="text" placeholder="Instructor name" />
      </label>

      <div class="twoCol">
        <label class="field">
          <span class="fieldLabel">Target CCF %</span>
          <input id="classTargetCcf" type="number" min="50" max="95" step="1" placeholder="80" />
        </label>

        <label class="field">
          <span class="fieldLabel">Session length</span>
          <select id="classSessionLength">
            <option value="120">2 minutes</option>
            <option value="300">5 minutes</option>
            <option value="600">10 minutes</option>
            <option value="0">Custom / unknown</option>
          </select>
        </label>
      </div>

      <label class="field">
        <span class="fieldLabel">Location / Notes</span>
        <input id="classLocation" type="text" placeholder="Room / station / notes" />
      </label>

      <label class="field">
        <span class="fieldLabel">Student list (one per line)</span>
        <textarea id="classStudents" rows="6" placeholder="Student One&#10;Student Two&#10;Student Three"></textarea>
      </label>

      <div class="row" style="gap:10px;">
        <button class="primaryBtn" id="btnSaveClass" type="button">Save Class</button>
        <button class="secondaryBtn" id="btnClearClass" type="button">Clear</button>
      </div>
    </section>

    <!-- Premium class dashboard -->
    <section class="classDash" aria-label="Class dashboard" style="margin-top:12px;">
      <div class="dashGrid">
        <div class="dashCard" id="classScoreCard"></div>
        <div class="dashCard">
          <div class="dashTitle">Class Performance</div>
          <div class="dashSub" id="classChartSub">Average CCF by student</div>
          <div id="classChart" class="classChart" aria-label="Class chart"></div>
        </div>
      </div>

      <div class="dashCard" style="margin-top:12px;">
        <div class="dashTitle">Students</div>
        <div class="dashSub">Export includes per-student averages and class score summary.</div>
        <div id="studentTable" class="studentTable"></div>
      </div>

      <div class="dashHint" id="classDashHint" style="display:none;"></div>
    </section>

    <div class="studentRow" style="margin-top:12px;">
      <label class="field" style="margin:0;">
        <span class="fieldLabel">Assign most recent session toâ€¦</span>
        <select id="studentSelect"></select>
      </label>
      <button class="endBtn" id="btnAssignLatest" type="button">Assign</button>
      <button class="endBtn" id="btnDownloadLatest" type="button">â¬‡ï¸Ž Download</button>
    </div>
  </section>

  <section class="historyBlock">
    <div class="historyTop">
      <div class="historyTitle">History</div>
      <div class="historyBtns">
        <button class="endBtn" id="btnExport">â¬‡ï¸Ž Export CSV</button>
        <button class="endBtn" id="btnClear">ðŸ—‘ Clear</button>
      </div>
    </div>
    <div id="historyList" class="historyList"></div>
  </section>

</main>

<script src="./reports.js"></script>
</body>
</html>
